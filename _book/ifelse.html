<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kappale 12 Ehtorakenteet | R-ohjelmoinnin perusteet</title>
  <meta name="description" content="This repository contains materials used in an introductory level R course at University of Jyväskylä and University of Eastern Finland." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Kappale 12 Ehtorakenteet | R-ohjelmoinnin perusteet" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This repository contains materials used in an introductory level R course at University of Jyväskylä and University of Eastern Finland." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kappale 12 Ehtorakenteet | R-ohjelmoinnin perusteet" />
  
  <meta name="twitter:description" content="This repository contains materials used in an introductory level R course at University of Jyväskylä and University of Eastern Finland." />
  

<meta name="author" content="Anton Klåvus (2020), Juho Kopra and Santtu Tikka (2021)" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="functions.html"/>
<link rel="next" href="loops.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://www.tinyurl.com/rkurssi">R-ohjelmoinnin perusteet</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="r-kurssi.html"><a href="r-kurssi.html"><i class="fa fa-check"></i>R-kurssi</a>
<ul>
<li class="chapter" data-level="" data-path="r-kurssi.html"><a href="r-kurssi.html#ohjeita-verkkokirjan-käyttöön"><i class="fa fa-check"></i>Ohjeita verkkokirjan käyttöön</a></li>
<li class="chapter" data-level="" data-path="r-kurssi.html"><a href="r-kurssi.html#lunttilappu"><i class="fa fa-check"></i>Lunttilappu</a></li>
<li class="chapter" data-level="" data-path="r-kurssi.html"><a href="r-kurssi.html#verkkolähteitä"><i class="fa fa-check"></i>Verkkolähteitä</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="alkuvalmistelut.html"><a href="alkuvalmistelut.html"><i class="fa fa-check"></i>Alkuvalmistelut</a>
<ul>
<li class="chapter" data-level="" data-path="alkuvalmistelut.html"><a href="alkuvalmistelut.html#rstudio"><i class="fa fa-check"></i>RStudio</a></li>
<li class="chapter" data-level="" data-path="alkuvalmistelut.html"><a href="alkuvalmistelut.html#rn-ja-rstudion-asentaminen-omalle-tietokoneelle"><i class="fa fa-check"></i>R:n ja RStudion asentaminen omalle tietokoneelle</a></li>
<li class="chapter" data-level="" data-path="alkuvalmistelut.html"><a href="alkuvalmistelut.html#rstudion-asennus-yliopiston-koneelle"><i class="fa fa-check"></i>RStudion asennus yliopiston koneelle</a></li>
<li class="chapter" data-level="" data-path="alkuvalmistelut.html"><a href="alkuvalmistelut.html#rstudion-käyttö"><i class="fa fa-check"></i>RStudion käyttö</a></li>
<li class="chapter" data-level="" data-path="alkuvalmistelut.html"><a href="alkuvalmistelut.html#rcourse-paketin-asentaminen"><i class="fa fa-check"></i>Rcourse-paketin asentaminen</a>
<ul>
<li class="chapter" data-level="" data-path="alkuvalmistelut.html"><a href="alkuvalmistelut.html#r-paketit"><i class="fa fa-check"></i>R-paketit</a></li>
<li class="chapter" data-level="" data-path="alkuvalmistelut.html"><a href="alkuvalmistelut.html#asentaminen"><i class="fa fa-check"></i>Asentaminen</a></li>
<li class="chapter" data-level="" data-path="alkuvalmistelut.html"><a href="alkuvalmistelut.html#opiskelu-ja-tenttiminen-rcourse-paketin-avulla"><i class="fa fa-check"></i>Opiskelu ja tenttiminen Rcourse-paketin avulla</a></li>
<li class="chapter" data-level="" data-path="alkuvalmistelut.html"><a href="alkuvalmistelut.html#tehtävien-tallentaminen-skripteihin-rstudiolla"><i class="fa fa-check"></i>Tehtävien tallentaminen skripteihin RStudiolla</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Johdanto</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#what_R"><i class="fa fa-check"></i><b>1.1</b> Mikä R on ja mitä sillä tehdään?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html"><i class="fa fa-check"></i><b>2</b> Muuttujat ja vektorit</a>
<ul>
<li class="chapter" data-level="2.1" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#variables"><i class="fa fa-check"></i><b>2.1</b> Muuttujat</a></li>
<li class="chapter" data-level="2.2" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#comments"><i class="fa fa-check"></i><b>2.2</b> Kommentit</a></li>
<li class="chapter" data-level="2.3" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#vectors"><i class="fa fa-check"></i><b>2.3</b> Vektorit</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#ei-numeeriset-vektorit"><i class="fa fa-check"></i><b>2.3.1</b> Ei-numeeriset vektorit</a></li>
<li class="chapter" data-level="2.3.2" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#vektorien-indeksointi-ja-osajoukon-valinta"><i class="fa fa-check"></i><b>2.3.2</b> Vektorien indeksointi ja osajoukon valinta</a></li>
<li class="chapter" data-level="2.3.3" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#puuttuvat-arvot"><i class="fa fa-check"></i><b>2.3.3</b> Puuttuvat arvot</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#extra"><i class="fa fa-check"></i><b>2.4</b> Extra: Alkeistietotyypit ja erikoisarvot</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#ääretön-ja-miinus-ääretön"><i class="fa fa-check"></i><b>2.4.1</b> Ääretön ja miinus ääretön</a></li>
<li class="chapter" data-level="2.4.2" data-path="variables-and-vectors.html"><a href="variables-and-vectors.html#ei-numero"><i class="fa fa-check"></i><b>2.4.2</b> Ei-numero</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>3</b> Tietotyypit</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-types.html"><a href="data-types.html#data-frame"><i class="fa fa-check"></i><b>3.1</b> Datakehikko (data.frame)</a></li>
<li class="chapter" data-level="3.2" data-path="data-types.html"><a href="data-types.html#matrix"><i class="fa fa-check"></i><b>3.2</b> Matriisi</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-types.html"><a href="data-types.html#matriisin-luominen"><i class="fa fa-check"></i><b>3.2.1</b> Matriisin luominen</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-types.html"><a href="data-types.html#matriisin-koko"><i class="fa fa-check"></i><b>3.2.2</b> Matriisin koko</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-types.html"><a href="data-types.html#matriisin-indeksointi"><i class="fa fa-check"></i><b>3.2.3</b> Matriisin indeksointi</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-types.html"><a href="data-types.html#matriisien-rakentaminen-vektoreista"><i class="fa fa-check"></i><b>3.2.4</b> Matriisien rakentaminen vektoreista</a></li>
<li class="chapter" data-level="3.2.5" data-path="data-types.html"><a href="data-types.html#rivien-ja-sarakkeiden-nimeäminen"><i class="fa fa-check"></i><b>3.2.5</b> Rivien ja sarakkeiden nimeäminen</a></li>
<li class="chapter" data-level="3.2.6" data-path="data-types.html"><a href="data-types.html#matriiseilla-laskeminen"><i class="fa fa-check"></i><b>3.2.6</b> Matriiseilla laskeminen</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-types.html"><a href="data-types.html#data-type-view"><i class="fa fa-check"></i><b>3.3</b> Tietotyyppien tarkastelu</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-types.html"><a href="data-types.html#view"><i class="fa fa-check"></i><b>3.3.1</b> View()</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-types.html"><a href="data-types.html#str"><i class="fa fa-check"></i><b>3.3.2</b> str()</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-types.html"><a href="data-types.html#head"><i class="fa fa-check"></i><b>3.3.3</b> head()</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-types.html"><a href="data-types.html#extra-taulukko-ja-lista"><i class="fa fa-check"></i><b>3.4</b> Extra: Taulukko ja lista</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data-types.html"><a href="data-types.html#array"><i class="fa fa-check"></i><b>3.4.1</b> Taulukko</a></li>
<li class="chapter" data-level="3.4.2" data-path="data-types.html"><a href="data-types.html#list"><i class="fa fa-check"></i><b>3.4.2</b> Lista</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="reading-data.html"><a href="reading-data.html"><i class="fa fa-check"></i><b>4</b> Datan lukeminen</a>
<ul>
<li class="chapter" data-level="4.1" data-path="reading-data.html"><a href="reading-data.html#tekstitiedostot"><i class="fa fa-check"></i><b>4.1</b> Tekstitiedostot</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="reading-data.html"><a href="reading-data.html#read.table"><i class="fa fa-check"></i><b>4.1.1</b> read.table</a></li>
<li class="chapter" data-level="4.1.2" data-path="reading-data.html"><a href="reading-data.html#read.csv"><i class="fa fa-check"></i><b>4.1.2</b> read.csv</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="reading-data.html"><a href="reading-data.html#datakehikon-tarkastelu"><i class="fa fa-check"></i><b>4.2</b> Datakehikon tarkastelu</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="reading-data.html"><a href="reading-data.html#rn-sisäänrakennetut-datasetit"><i class="fa fa-check"></i><b>4.2.1</b> R:n sisäänrakennetut datasetit</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="reading-data.html"><a href="reading-data.html#muut-tiedostot"><i class="fa fa-check"></i><b>4.3</b> Muut tiedostot</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="reading-data.html"><a href="reading-data.html#excel"><i class="fa fa-check"></i><b>4.3.1</b> Excel</a></li>
<li class="chapter" data-level="4.3.2" data-path="reading-data.html"><a href="reading-data.html#spss"><i class="fa fa-check"></i><b>4.3.2</b> SPSS</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>5</b> Datan muokkaaminen</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-wrangling.html"><a href="data-wrangling.html#data-frame-wrangling"><i class="fa fa-check"></i><b>5.1</b> Uuden muuttujan tai rivin luonti datakehikkoon</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data-wrangling.html"><a href="data-wrangling.html#datakehikon-käsittely"><i class="fa fa-check"></i><b>5.1.1</b> Datakehikon käsittely</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-wrangling.html"><a href="data-wrangling.html#osajoukkojen-valinta"><i class="fa fa-check"></i><b>5.2</b> Osajoukkojen valinta</a></li>
<li class="chapter" data-level="5.3" data-path="data-wrangling.html"><a href="data-wrangling.html#faktorit"><i class="fa fa-check"></i><b>5.3</b> Faktorit</a></li>
<li class="chapter" data-level="5.4" data-path="data-wrangling.html"><a href="data-wrangling.html#factor-extra"><i class="fa fa-check"></i><b>5.4</b> Extra: Lääketutkimusesimerkki</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="statistics.html"><a href="statistics.html"><i class="fa fa-check"></i><b>6</b> Tunnusluvut</a>
<ul>
<li class="chapter" data-level="6.1" data-path="statistics.html"><a href="statistics.html#sijaintia-kuvaavat-tunnusluvut"><i class="fa fa-check"></i><b>6.1</b> Sijaintia kuvaavat tunnusluvut</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="statistics.html"><a href="statistics.html#minimi-ja-maksimi"><i class="fa fa-check"></i><b>6.1.1</b> Minimi ja maksimi</a></li>
<li class="chapter" data-level="6.1.2" data-path="statistics.html"><a href="statistics.html#keskiarvo"><i class="fa fa-check"></i><b>6.1.2</b> Keskiarvo</a></li>
<li class="chapter" data-level="6.1.3" data-path="statistics.html"><a href="statistics.html#mediaani"><i class="fa fa-check"></i><b>6.1.3</b> Mediaani</a></li>
<li class="chapter" data-level="6.1.4" data-path="statistics.html"><a href="statistics.html#kvantiilit"><i class="fa fa-check"></i><b>6.1.4</b> Kvantiilit</a></li>
<li class="chapter" data-level="6.1.5" data-path="statistics.html"><a href="statistics.html#moodi"><i class="fa fa-check"></i><b>6.1.5</b> Moodi</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="statistics.html"><a href="statistics.html#yhteenveto-datasta-summary"><i class="fa fa-check"></i><b>6.2</b> Yhteenveto datasta (summary)</a></li>
<li class="chapter" data-level="6.3" data-path="statistics.html"><a href="statistics.html#varianssi-ja-keskihajonta"><i class="fa fa-check"></i><b>6.3</b> Varianssi ja keskihajonta</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i><b>7</b> Todennäköisyysjakaumat R:ssä</a>
<ul>
<li class="chapter" data-level="7.1" data-path="distributions.html"><a href="distributions.html#esimerkki-normaalijakauma"><i class="fa fa-check"></i><b>7.1</b> Esimerkki: normaalijakauma</a></li>
<li class="chapter" data-level="7.2" data-path="distributions.html"><a href="distributions.html#muita-jakaumia"><i class="fa fa-check"></i><b>7.2</b> Muita jakaumia</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>8</b> Kuvaajien piirtäminen</a>
<ul>
<li class="chapter" data-level="8.1" data-path="plotting.html"><a href="plotting.html#korkean-tason-piirtofunktiot"><i class="fa fa-check"></i><b>8.1</b> Korkean tason piirtofunktiot</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="plotting.html"><a href="plotting.html#plot"><i class="fa fa-check"></i><b>8.1.1</b> plot</a></li>
<li class="chapter" data-level="8.1.2" data-path="plotting.html"><a href="plotting.html#muut-korkean-tason-funktiot"><i class="fa fa-check"></i><b>8.1.2</b> Muut korkean tason funktiot</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="plotting.html"><a href="plotting.html#alemman-tason-grafiikkatoiminnot"><i class="fa fa-check"></i><b>8.2</b> Alemman tason grafiikkatoiminnot</a></li>
<li class="chapter" data-level="8.3" data-path="plotting.html"><a href="plotting.html#kuvaajien-piirtäminen-käytännössä"><i class="fa fa-check"></i><b>8.3</b> Kuvaajien piirtäminen käytännössä</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tests.html"><a href="tests.html"><i class="fa fa-check"></i><b>9</b> Tilastollinen testaaminen</a>
<ul>
<li class="chapter" data-level="9.1" data-path="tests.html"><a href="tests.html#testaamisen-periaatteita"><i class="fa fa-check"></i><b>9.1</b> Testaamisen periaatteita</a></li>
<li class="chapter" data-level="9.2" data-path="tests.html"><a href="tests.html#t-test"><i class="fa fa-check"></i><b>9.2</b> t-testi</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="tests.html"><a href="tests.html#yhden-otoksen-t-testi"><i class="fa fa-check"></i><b>9.2.1</b> Yhden otoksen t-testi</a></li>
<li class="chapter" data-level="9.2.2" data-path="tests.html"><a href="tests.html#kahden-otoksen-t-testi"><i class="fa fa-check"></i><b>9.2.2</b> Kahden otoksen t-testi</a></li>
<li class="chapter" data-level="9.2.3" data-path="tests.html"><a href="tests.html#parittaisten-otosten-t-testi"><i class="fa fa-check"></i><b>9.2.3</b> Parittaisten otosten t-testi</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="tests.html"><a href="tests.html#chi-squared-test"><i class="fa fa-check"></i><b>9.3</b> Khiin neliö -testi</a></li>
<li class="chapter" data-level="9.4" data-path="tests.html"><a href="tests.html#anova"><i class="fa fa-check"></i><b>9.4</b> Varianssianalyysi</a></li>
<li class="chapter" data-level="9.5" data-path="tests.html"><a href="tests.html#levene"><i class="fa fa-check"></i><b>9.5</b> Levenen testi</a></li>
<li class="chapter" data-level="9.6" data-path="tests.html"><a href="tests.html#shapiro"><i class="fa fa-check"></i><b>9.6</b> Shapiro-Wilk -testi</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="linear-models.html"><a href="linear-models.html"><i class="fa fa-check"></i><b>10</b> Lineaariset mallit</a>
<ul>
<li class="chapter" data-level="10.1" data-path="linear-models.html"><a href="linear-models.html#teoria"><i class="fa fa-check"></i><b>10.1</b> Teoria</a></li>
<li class="chapter" data-level="10.2" data-path="linear-models.html"><a href="linear-models.html#esimerkki"><i class="fa fa-check"></i><b>10.2</b> Esimerkki</a></li>
<li class="chapter" data-level="10.3" data-path="linear-models.html"><a href="linear-models.html#tarkempia-tietoja-mallista"><i class="fa fa-check"></i><b>10.3</b> Tarkempia tietoja mallista</a></li>
<li class="chapter" data-level="10.4" data-path="linear-models.html"><a href="linear-models.html#ennustaminen"><i class="fa fa-check"></i><b>10.4</b> Ennustaminen</a></li>
<li class="chapter" data-level="10.5" data-path="linear-models.html"><a href="linear-models.html#korrelaatio"><i class="fa fa-check"></i><b>10.5</b> Korrelaatio</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>11</b> Funktiot</a>
<ul>
<li class="chapter" data-level="11.1" data-path="functions.html"><a href="functions.html#funktion-käsite"><i class="fa fa-check"></i><b>11.1</b> Funktion käsite</a></li>
<li class="chapter" data-level="11.2" data-path="functions.html"><a href="functions.html#r-funktiot"><i class="fa fa-check"></i><b>11.2</b> R-funktiot</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="functions.html"><a href="functions.html#funktioiden-määrittely"><i class="fa fa-check"></i><b>11.2.1</b> Funktioiden määrittely</a></li>
<li class="chapter" data-level="11.2.2" data-path="functions.html"><a href="functions.html#argumentit-ja-funktion-kutsuminen"><i class="fa fa-check"></i><b>11.2.2</b> Argumentit ja funktion kutsuminen</a></li>
<li class="chapter" data-level="11.2.3" data-path="functions.html"><a href="functions.html#funktio-ilman-argumentteja"><i class="fa fa-check"></i><b>11.2.3</b> Funktio ilman argumentteja</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="functions.html"><a href="functions.html#palautus-return"><i class="fa fa-check"></i><b>11.3</b> Palautus (return)</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="functions.html"><a href="functions.html#usean-arvon-palautus"><i class="fa fa-check"></i><b>11.3.1</b> Usean arvon palautus</a></li>
<li class="chapter" data-level="11.3.2" data-path="functions.html"><a href="functions.html#palautus-ilman-return-käskyä"><i class="fa fa-check"></i><b>11.3.2</b> Palautus ilman return-käskyä</a></li>
<li class="chapter" data-level="11.3.3" data-path="functions.html"><a href="functions.html#funktio-ilman-tulosta"><i class="fa fa-check"></i><b>11.3.3</b> Funktio ilman tulosta</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="ifelse.html"><a href="ifelse.html"><i class="fa fa-check"></i><b>12</b> Ehtorakenteet</a>
<ul>
<li class="chapter" data-level="12.1" data-path="ifelse.html"><a href="ifelse.html#loogiset-operaattorit"><i class="fa fa-check"></i><b>12.1</b> Loogiset operaattorit</a></li>
<li class="chapter" data-level="12.2" data-path="ifelse.html"><a href="ifelse.html#ehtorakenteet"><i class="fa fa-check"></i><b>12.2</b> Ehtorakenteet</a></li>
<li class="chapter" data-level="12.3" data-path="ifelse.html"><a href="ifelse.html#alkioiden-poimiminen-vektorista-tietyn-ehdon-perusteella"><i class="fa fa-check"></i><b>12.3</b> Alkioiden poimiminen vektorista tietyn ehdon perusteella</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>13</b> Toistorakenteet (loops)</a>
<ul>
<li class="chapter" data-level="13.1" data-path="loops.html"><a href="loops.html#for-silmukka"><i class="fa fa-check"></i><b>13.1</b> For-silmukka</a></li>
<li class="chapter" data-level="13.2" data-path="loops.html"><a href="loops.html#while-slimukat"><i class="fa fa-check"></i><b>13.2</b> While-slimukat</a></li>
<li class="chapter" data-level="13.3" data-path="loops.html"><a href="loops.html#sisäkkäiset-silmukat-nested-loops"><i class="fa fa-check"></i><b>13.3</b> Sisäkkäiset silmukat (nested loops)</a></li>
<li class="chapter" data-level="13.4" data-path="loops.html"><a href="loops.html#iterointiin-puuttuminen-next-ja-break"><i class="fa fa-check"></i><b>13.4</b> Iterointiin puuttuminen: next ja break</a></li>
<li class="chapter" data-level="13.5" data-path="loops.html"><a href="loops.html#apply-funktiot"><i class="fa fa-check"></i><b>13.5</b> Apply-funktiot</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="numerical.html"><a href="numerical.html"><i class="fa fa-check"></i><b>14</b> Numeeriset menetelmät</a>
<ul>
<li class="chapter" data-level="14.1" data-path="numerical.html"><a href="numerical.html#optimointi"><i class="fa fa-check"></i><b>14.1</b> Optimointi</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="numerical.html"><a href="numerical.html#yksi-parametri"><i class="fa fa-check"></i><b>14.1.1</b> Yksi parametri</a></li>
<li class="chapter" data-level="14.1.2" data-path="numerical.html"><a href="numerical.html#useampi-parametri"><i class="fa fa-check"></i><b>14.1.2</b> Useampi parametri</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="numerical.html"><a href="numerical.html#funktion-juurten-etsintä"><i class="fa fa-check"></i><b>14.2</b> Funktion juurten etsintä</a></li>
<li class="chapter" data-level="14.3" data-path="numerical.html"><a href="numerical.html#numeerinen-integrointi"><i class="fa fa-check"></i><b>14.3</b> Numeerinen integrointi</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Julkaistu bookdownilla.</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R-ohjelmoinnin perusteet</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ifelse" class="section level1" number="12">
<h1><span class="header-section-number">Kappale 12</span> Ehtorakenteet</h1>
<p><a href="functions.html#functions">Funktiot</a> kappaleen funktiot suorittavat aina samat komennot riippumatta syötteestä. Entä jos funktion toiminnassa pitäisi ottaa huomioon erilaisia tapauksia, eli suorittaa tiettyjä komentoja vain joissain tilanteissa? Tätä varten ohjelmointikielissä on ehtorakenteita, eli ns. if/else-rakenteita, jotka ohjaavat ohjelman toimintaa.</p>
<p>Tutustutaan ensin tarkemmin loogisiin operaattoreihin.</p>
<div id="loogiset-operaattorit" class="section level2" number="12.1">
<h2><span class="header-section-number">12.1</span> Loogiset operaattorit</h2>
<p>Tässä on lyhyt lista loogisista operaattoreista:</p>
<table>
<thead>
<tr class="header">
<th align="left">Operaattori</th>
<th align="left">Toiminto</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">&lt;</td>
<td align="left">pienempi kuin</td>
</tr>
<tr class="even">
<td align="left">&lt;=</td>
<td align="left">pienempi tai yhtä suuri kuin</td>
</tr>
<tr class="odd">
<td align="left">&gt;</td>
<td align="left">suurempi kuin</td>
</tr>
<tr class="even">
<td align="left">&gt;=</td>
<td align="left">suurempi tai yhtä suuri kuin</td>
</tr>
<tr class="odd">
<td align="left">==</td>
<td align="left">yhtä kuin</td>
</tr>
<tr class="even">
<td align="left">!=</td>
<td align="left">ei yhtä kuin</td>
</tr>
<tr class="odd">
<td align="left">!a</td>
<td align="left">ei a (negaation)</td>
</tr>
<tr class="even">
<td align="left">a | b</td>
<td align="left">a TAI b alkioittain</td>
</tr>
<tr class="odd">
<td align="left">a || b</td>
<td align="left">a TAI b yksittäisille arvoille</td>
</tr>
<tr class="even">
<td align="left">a &amp; b</td>
<td align="left">a JA b alkioittain</td>
</tr>
<tr class="odd">
<td align="left">a &amp;&amp; b</td>
<td align="left">a JA b yksittäisille arvoille</td>
</tr>
<tr class="even">
<td align="left">a %in% b</td>
<td align="left">mitkä a:n alkiot ovat myös b:n alkioita</td>
</tr>
</tbody>
</table>
<!-- Santtu: myös NA on mahdollinen tulos esim NA & TRUE == NA -->
<p>Kaikki loogiset operaattorit palauttavat joko arvon <code>TRUE</code>, <code>FALSE</code> tai <code>NA</code>. Vertailuoperaattorien käyttö on jo tullut tutuksi aikaisemmissa kappaleissa, mutta tutustutaan vähän tarkemmin viimeisten rivien operaattoreihin.</p>
<div id="negaatio" class="section level4" number="12.1.0.1">
<h4><span class="header-section-number">12.1.0.1</span> Negaatio</h4>
<p>Looginen negaatio palauttaa loogisen lauseen vastakohdan, eli muuttaa arvon <code>TRUE</code> arvoksi <code>FALSE</code> ja arvon <code>FALSE</code> arvoksi <code>TRUE</code>.</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="ifelse.html#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">&gt;</span> <span class="dv">12</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="ifelse.html#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>(<span class="dv">10</span> <span class="sc">&gt;</span> <span class="dv">12</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="ifelse.html#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Also works without parentheses</span></span>
<span id="cb478-2"><a href="ifelse.html#cb478-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="dv">10</span> <span class="sc">&gt;</span> <span class="dv">12</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="ifelse.html#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">is.na</span>(<span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="looginen-tai-disjunktio" class="section level4" number="12.1.0.2">
<h4><span class="header-section-number">12.1.0.2</span> Looginen TAI (disjunktio)</h4>
<p>Loogiselle TAI operaattorille annetaan kaksi loogista lausetta, ja TAI operaattori palauttaa <code>TRUE</code>, jos vähintään toinen lauseista on <code>TRUE</code>. R:ssä TAI merkitään pystyviivalla <code>|</code> tai kahdella pystyviivalla <code>||</code>. <code>|</code> käy läpi vektoreita alkioittain, <code>||</code> vertaa kahta loogista lausetta, ja toista lausetta ei edes ajeta, jos ensimmäinen on <code>TRUE</code> (koska <code>||</code> palauttaa <code>TRUE</code> riippumatta toisen lauseen arvosta). Jos tämä tuntui monimutkaiselta, niin riittää muistaa, että ehtorakenteissa kannattaa käyttää muotoa “||”.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="ifelse.html#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">&gt;</span> <span class="dv">12</span> <span class="sc">||</span> <span class="st">&quot;a&quot;</span> <span class="sc">&lt;</span> <span class="st">&quot;b&quot;</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="ifelse.html#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">||</span> <span class="dv">4</span> <span class="sc">&gt;</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="ifelse.html#cb486-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;a&quot;</span> <span class="sc">&gt;</span> <span class="st">&quot;c&quot;</span> <span class="sc">||</span> <span class="dv">1</span> <span class="sc">&gt;</span> <span class="dv">10</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="looginen-ja-konjunktio" class="section level4" number="12.1.0.3">
<h4><span class="header-section-number">12.1.0.3</span> Looginen JA (konjunktio)</h4>
<p>Loogiselle JA operaattorille annetaan kaksi lausetta. JA palauttaa <code>TRUE</code>, jos kummatkin lauseet ovat <code>TRUE</code>. R:ssä JA-operaattorit ovat <code>&amp;</code> ja <code>&amp;&amp;</code>, jotka käyttäytyvät kuten <code>|</code> ja <code>||</code>.</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="ifelse.html#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">&gt;</span> <span class="dv">12</span> <span class="sc">&amp;&amp;</span> <span class="st">&quot;a&quot;</span> <span class="sc">&lt;</span> <span class="st">&quot;b&quot;</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="ifelse.html#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;&amp;</span> <span class="dv">4</span> <span class="sc">&gt;</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="ifelse.html#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;a&quot;</span> <span class="sc">&gt;</span> <span class="st">&quot;c&quot;</span> <span class="sc">&amp;&amp;</span> <span class="dv">1</span> <span class="sc">&gt;</span> <span class="dv">10</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="osajoukko" class="section level4" number="12.1.0.4">
<h4><span class="header-section-number">12.1.0.4</span> Osajoukko</h4>
<p><code>%in%</code>-operaattorilla voi tarkistaa, kuuluuko jokin arvo suurempaan joukkoon. Tämä voitaisiin toteuttaa myös usealla TAI-operaattorilla, mutta <code>%in%</code> on usein paljon kätevämpi.</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="ifelse.html#cb494-1" aria-hidden="true" tabindex="-1"></a>dna_bases <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;G&quot;</span>, <span class="st">&quot;T&quot;</span>)</span>
<span id="cb494-2"><a href="ifelse.html#cb494-2" aria-hidden="true" tabindex="-1"></a>rna_bases <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;G&quot;</span>, <span class="st">&quot;U&quot;</span>)</span>
<span id="cb494-3"><a href="ifelse.html#cb494-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb494-4"><a href="ifelse.html#cb494-4" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;T&quot;</span> <span class="sc">%in%</span> dna_bases</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="ifelse.html#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;T&quot;</span> <span class="sc">%in%</span> rna_bases</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="ifelse.html#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With negation</span></span>
<span id="cb498-2"><a href="ifelse.html#cb498-2" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="st">&quot;A&quot;</span> <span class="sc">%in%</span> dna_bases</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Operaattoria voi soveltaa myös vektoreihin, jolloin operaattori palauttaa loogisen vektorin, jonka alkio jokainen alkio kertoo, kuuluiko vastaava operaation vasemman puolen alkio operaation oikeaan puoleen.</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="ifelse.html#cb500-1" aria-hidden="true" tabindex="-1"></a>dna_bases <span class="sc">%in%</span> rna_bases</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE</code></pre>
</div>
<div id="monimutkaisemmat-lauseet" class="section level4" number="12.1.0.5">
<h4><span class="header-section-number">12.1.0.5</span> Monimutkaisemmat lauseet</h4>
<p>Operaattoreita voidaan myös yhdistellä monimutkaisemmiksi lauseiksi. Tällöin lauseiden evaluointijärjestys määritetään tarvittaessa suluilla.</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="ifelse.html#cb502-1" aria-hidden="true" tabindex="-1"></a>dog <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">breed =</span> <span class="st">&quot;golden retriever&quot;</span>,</span>
<span id="cb502-2"><a href="ifelse.html#cb502-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">height =</span> <span class="dv">45</span>,</span>
<span id="cb502-3"><a href="ifelse.html#cb502-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">weight =</span> <span class="dv">27</span>)</span>
<span id="cb502-4"><a href="ifelse.html#cb502-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb502-5"><a href="ifelse.html#cb502-5" aria-hidden="true" tabindex="-1"></a>dog<span class="sc">$</span>breed <span class="sc">==</span> <span class="st">&quot;golden retriever&quot;</span> <span class="sc">&amp;&amp;</span> dog<span class="sc">$</span>weight <span class="sc">&lt;</span> <span class="dv">25</span> <span class="sc">||</span> dog<span class="sc">$</span>height <span class="sc">&lt;</span> <span class="dv">50</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="a-x-b" class="section level4" number="12.1.0.6">
<h4><span class="header-section-number">12.1.0.6</span> a &lt; x &lt; b</h4>
<p>usein tulee vastaan tilanteita, joissa halutaan tarkistaa, onko jokin luku halutulla välillä. Tämä kirjoitetaan matemaatiisesti esim. näin: <span class="math inline">\(a &lt; x &lt; b\)</span>, jossa tarkastetaan, onko <span class="math inline">\(x\)</span> välillä <span class="math inline">\((a, b)\)</span>. Tämä ei kuitenkaan valitettavasti toimi R:ssä, vaan tarkistus pitää jakaa kahteen osaan:
<!-- Santtu: ihan vain huomiona, onko ohjelmointikieltä jossa a < x < b toimisi suoraan? Itse en ainakaan tiedä yhtäkään, ehkä Haskell mutta en muista.--></p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="ifelse.html#cb504-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Are x and y between 0 and 1?</span></span>
<span id="cb504-2"><a href="ifelse.html#cb504-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb504-3"><a href="ifelse.html#cb504-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fl">0.3</span></span>
<span id="cb504-4"><a href="ifelse.html#cb504-4" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="sc">&lt;=</span> x <span class="sc">&amp;&amp;</span> x <span class="sc">&lt;=</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="ifelse.html#cb506-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="sc">&lt;=</span> y <span class="sc">&amp;&amp;</span> y <span class="sc">&lt;=</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
</div>
<div id="ehtorakenteet" class="section level2" number="12.2">
<h2><span class="header-section-number">12.2</span> Ehtorakenteet</h2>
<p>Aloitetaan esimerkistä: tehtävänä on kirjoittaa funktio, jolle annetaan syötteenä potilaan hemoglobiiniarvo. Funktion on tarkoitus hälyttää, jos hemoglobiini laskee alle viitearvojen alarajan 117. Kyseinen funktio voisi näyttää vaikka tältä:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="ifelse.html#cb508-1" aria-hidden="true" tabindex="-1"></a>hb_alert <span class="ot">&lt;-</span> <span class="cf">function</span>(hb) {</span>
<span id="cb508-2"><a href="ifelse.html#cb508-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (hb <span class="sc">&lt;</span> <span class="dv">117</span>) {</span>
<span id="cb508-3"><a href="ifelse.html#cb508-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is low!&quot;</span>)</span>
<span id="cb508-4"><a href="ifelse.html#cb508-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb508-5"><a href="ifelse.html#cb508-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Funktiolla on siis yksi argumentti, <code>hb</code> eli hemoglobiiniarvo. Funktion sisällä on if-rakenne. If-rakenteessa on kaksi osaa: ehto, ja rakenteen sisäinen koodi. Rakenteen sisäinen koodi ajetaan vain, jos ehto täyttyy. Ehto merkitään if-komennon jälkeen sulkeisiin, ja rakenteen sisäinen koodi kirjoitetaan sulkeiden jälkeen aaltosulkeiden sisään. (Jos aaltosulkeiden sisään tulisi vain yksi rivi koodia, aaltoasulkeet voi jättää pois, mutta näissä esimerkeissä käytetään aina aaltoasulkeita).</p>
<p>Kokeillaan, miten funktio toimii eri hemoglobiiniarvoilla:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="ifelse.html#cb509-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nothing happens</span></span>
<span id="cb509-2"><a href="ifelse.html#cb509-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="dv">130</span>)</span>
<span id="cb509-3"><a href="ifelse.html#cb509-3" aria-hidden="true" tabindex="-1"></a><span class="co"># returns alert</span></span>
<span id="cb509-4"><a href="ifelse.html#cb509-4" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="dv">110</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hemoglobin is low!&quot;</code></pre>
<p>Funktio siis toimii oletetusti, eli se hälyttää vain, jos hemoglobiinitaso on alle 117. Käyttäjän kannalta olisi kuitenkin kätevää saada jonkinlainen palaute myös silloin, kun hemoglobiinitaso on tarpeeksi korkea. Tätä varten voidaan käyttää else-komentoa:</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb511-1"><a href="ifelse.html#cb511-1" aria-hidden="true" tabindex="-1"></a>hb_alert <span class="ot">&lt;-</span> <span class="cf">function</span>(hb) {</span>
<span id="cb511-2"><a href="ifelse.html#cb511-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (hb <span class="sc">&lt;</span> <span class="dv">117</span>) {</span>
<span id="cb511-3"><a href="ifelse.html#cb511-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is low!&quot;</span>)</span>
<span id="cb511-4"><a href="ifelse.html#cb511-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb511-5"><a href="ifelse.html#cb511-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin OK&quot;</span>)</span>
<span id="cb511-6"><a href="ifelse.html#cb511-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb511-7"><a href="ifelse.html#cb511-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb511-8"><a href="ifelse.html#cb511-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb511-9"><a href="ifelse.html#cb511-9" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="dv">130</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hemoglobin OK&quot;</code></pre>
<p>Else-komennon jälkeinen koodi siis ajetaan, jos ehto <code>hb &lt; 117</code> ei täyty.</p>
<p>Tällä hetkellä funktiomme toimii vain naispotilaille, sillä miehillä hemoglobiiniarvojen alaraja on 134. Lisätään siis funktioomme argumentti <code>sex</code> sukupuolta varten ja muokataan funktion toimintaa niin, että se osaa ottaa huomioon sukupuolen. Nyt if-rakenteen ehdosta tulee jo hieman monimutkaisempi:</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="ifelse.html#cb513-1" aria-hidden="true" tabindex="-1"></a>hb_alert <span class="ot">&lt;-</span> <span class="cf">function</span>(hb, sex) {</span>
<span id="cb513-2"><a href="ifelse.html#cb513-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span> <span class="sc">&amp;&amp;</span> hb <span class="sc">&lt;</span> <span class="dv">117</span> <span class="sc">||</span> sex <span class="sc">==</span> <span class="st">&quot;male&quot;</span> <span class="sc">&amp;&amp;</span> hb <span class="sc">&lt;</span> <span class="dv">134</span>) {</span>
<span id="cb513-3"><a href="ifelse.html#cb513-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is low!&quot;</span>)</span>
<span id="cb513-4"><a href="ifelse.html#cb513-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb513-5"><a href="ifelse.html#cb513-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin OK&quot;</span>)</span>
<span id="cb513-6"><a href="ifelse.html#cb513-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb513-7"><a href="ifelse.html#cb513-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb513-8"><a href="ifelse.html#cb513-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb513-9"><a href="ifelse.html#cb513-9" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="at">hb =</span> <span class="dv">120</span>, <span class="at">sex =</span> <span class="st">&quot;female&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hemoglobin OK&quot;</code></pre>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="ifelse.html#cb515-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="at">hb =</span> <span class="dv">120</span>, <span class="at">sex =</span> <span class="st">&quot;male&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hemoglobin is low!&quot;</code></pre>
<p>Entä jos haluaisimme tulostaa eri varoituksen mies- ja naispotilaille? Tähän tarvitaan “else if”-rakennetta:</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="ifelse.html#cb517-1" aria-hidden="true" tabindex="-1"></a>hb_alert <span class="ot">&lt;-</span> <span class="cf">function</span>(hb, sex) {</span>
<span id="cb517-2"><a href="ifelse.html#cb517-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span> <span class="sc">&amp;&amp;</span> hb <span class="sc">&lt;</span> <span class="dv">117</span>) {</span>
<span id="cb517-3"><a href="ifelse.html#cb517-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is low for a female!&quot;</span>)</span>
<span id="cb517-4"><a href="ifelse.html#cb517-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (sex <span class="sc">==</span> <span class="st">&quot;male&quot;</span> <span class="sc">&amp;&amp;</span> hb <span class="sc">&lt;</span> <span class="dv">134</span>) {</span>
<span id="cb517-5"><a href="ifelse.html#cb517-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is low for a male!&quot;</span>)</span>
<span id="cb517-6"><a href="ifelse.html#cb517-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb517-7"><a href="ifelse.html#cb517-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin OK&quot;</span>)</span>
<span id="cb517-8"><a href="ifelse.html#cb517-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb517-9"><a href="ifelse.html#cb517-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb517-10"><a href="ifelse.html#cb517-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb517-11"><a href="ifelse.html#cb517-11" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="at">hb =</span> <span class="dv">110</span>, <span class="at">sex =</span> <span class="st">&quot;female&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hemoglobin is low for a female!&quot;</code></pre>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="ifelse.html#cb519-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="at">hb =</span> <span class="dv">120</span>, <span class="at">sex =</span> <span class="st">&quot;male&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hemoglobin is low for a male!&quot;</code></pre>
<p>Nyt funktio tarkistaa ensin, onko potilas nainen ja onko hänen hemoglobiininsa alle 117. Jos ei, siirrytään eteenpäin ja tarkistetaan, onko potilas mies ja onko hänen hemoglobiininsa alle 130. Jos ei, siirrytään viimeiseen kohtaan, ja tulostetaan “Hemoglobin ok”.</p>
<p>Else-if rakenteita voi olla rajoittamaton määrä ensimmäisen if-rakenteen jälkeen. Lisätään funktioon hälytys kriittisestä hemoglobiinin määrästä (hb &lt; 50) riippumatta sukupuolesta:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="ifelse.html#cb521-1" aria-hidden="true" tabindex="-1"></a>hb_alert <span class="ot">&lt;-</span> <span class="cf">function</span>(hb, sex) {</span>
<span id="cb521-2"><a href="ifelse.html#cb521-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span> <span class="sc">&amp;&amp;</span> hb <span class="sc">&lt;</span> <span class="dv">117</span>) {</span>
<span id="cb521-3"><a href="ifelse.html#cb521-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is low for a female!&quot;</span>)</span>
<span id="cb521-4"><a href="ifelse.html#cb521-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (sex <span class="sc">==</span> <span class="st">&quot;male&quot;</span> <span class="sc">&amp;&amp;</span> hb <span class="sc">&lt;</span> <span class="dv">134</span>) {</span>
<span id="cb521-5"><a href="ifelse.html#cb521-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is low for a male!&quot;</span>)</span>
<span id="cb521-6"><a href="ifelse.html#cb521-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (hb <span class="sc">&lt;</span> <span class="dv">50</span>) {</span>
<span id="cb521-7"><a href="ifelse.html#cb521-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is critical&quot;</span>)</span>
<span id="cb521-8"><a href="ifelse.html#cb521-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb521-9"><a href="ifelse.html#cb521-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin OK&quot;</span>)</span>
<span id="cb521-10"><a href="ifelse.html#cb521-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb521-11"><a href="ifelse.html#cb521-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb521-12"><a href="ifelse.html#cb521-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb521-13"><a href="ifelse.html#cb521-13" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="at">hb =</span> <span class="dv">32</span>, <span class="at">sex =</span> <span class="st">&quot;female&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hemoglobin is low for a female!&quot;</code></pre>
<p>Kuten huomataan, yllä oleva koodi ei toimikaan, kuten piti. Näin alhaisella hemoglobiinilla pitäisi tulla varoitus kriittisestä tilasta. Koodi suoritus ei kuitenkaan ikinä etene kriittisen tilan varoitukseen asti, sillä ensimmäinen ehto täyttyy. Korjataan tilanne siirtämällä kriittisen tilan ehto ensimmäiseksi:</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="ifelse.html#cb523-1" aria-hidden="true" tabindex="-1"></a>hb_alert <span class="ot">&lt;-</span> <span class="cf">function</span>(hb, sex) {</span>
<span id="cb523-2"><a href="ifelse.html#cb523-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (hb <span class="sc">&lt;</span> <span class="dv">50</span>) {</span>
<span id="cb523-3"><a href="ifelse.html#cb523-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is critical&quot;</span>)</span>
<span id="cb523-4"><a href="ifelse.html#cb523-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (sex <span class="sc">==</span> <span class="st">&quot;male&quot;</span> <span class="sc">&amp;&amp;</span> hb <span class="sc">&lt;</span> <span class="dv">134</span>) {</span>
<span id="cb523-5"><a href="ifelse.html#cb523-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is low for a male!&quot;</span>)</span>
<span id="cb523-6"><a href="ifelse.html#cb523-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span> <span class="sc">&amp;&amp;</span> hb <span class="sc">&lt;</span> <span class="dv">117</span>) {</span>
<span id="cb523-7"><a href="ifelse.html#cb523-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is low for a female!&quot;</span>)</span>
<span id="cb523-8"><a href="ifelse.html#cb523-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb523-9"><a href="ifelse.html#cb523-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin OK&quot;</span>)</span>
<span id="cb523-10"><a href="ifelse.html#cb523-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb523-11"><a href="ifelse.html#cb523-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb523-12"><a href="ifelse.html#cb523-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb523-13"><a href="ifelse.html#cb523-13" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="at">hb =</span> <span class="dv">32</span>, <span class="at">sex =</span> <span class="st">&quot;female&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hemoglobin is critical&quot;</code></pre>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb525-1"><a href="ifelse.html#cb525-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="at">hb =</span> <span class="dv">120</span>, <span class="at">sex =</span> <span class="st">&quot;female&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hemoglobin OK&quot;</code></pre>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="ifelse.html#cb527-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="at">hb =</span> <span class="dv">120</span>, <span class="at">sex =</span> <span class="st">&quot;male&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hemoglobin is low for a male!&quot;</code></pre>
<p>Nyt funktio toimii haluamallamme tavalla!</p>
<p>Funktioissa voi myös olla useampi ehtorakenne. Ehtorakenteita käytetään usein tarkistamaan argumenttien arvoja. Lisätään ehtorakenteet argumenttien tarkistamiseksi:
<!-- Santtu: Mielestäni näiden tarkastusten tulisi kutsua stop, eikä palauttaa tekstiä, kyseessä on kuitenkin virhetilanne --></p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="ifelse.html#cb529-1" aria-hidden="true" tabindex="-1"></a>hb_alert <span class="ot">&lt;-</span> <span class="cf">function</span>(hb, sex) {</span>
<span id="cb529-2"><a href="ifelse.html#cb529-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Hemoglobin should be numeric and positive</span></span>
<span id="cb529-3"><a href="ifelse.html#cb529-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(hb) <span class="sc">||</span> hb <span class="sc">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb529-4"><a href="ifelse.html#cb529-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin should be numeric and positive&quot;</span>)</span>
<span id="cb529-5"><a href="ifelse.html#cb529-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb529-6"><a href="ifelse.html#cb529-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>sex <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>)) {</span>
<span id="cb529-7"><a href="ifelse.html#cb529-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;This function can only deal with binary sex: female or male&quot;</span>)</span>
<span id="cb529-8"><a href="ifelse.html#cb529-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb529-9"><a href="ifelse.html#cb529-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb529-10"><a href="ifelse.html#cb529-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (hb <span class="sc">&lt;</span> <span class="dv">50</span>) {</span>
<span id="cb529-11"><a href="ifelse.html#cb529-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is critical&quot;</span>)</span>
<span id="cb529-12"><a href="ifelse.html#cb529-12" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (sex <span class="sc">==</span> <span class="st">&quot;male&quot;</span> <span class="sc">&amp;&amp;</span> hb <span class="sc">&lt;</span> <span class="dv">134</span>) {</span>
<span id="cb529-13"><a href="ifelse.html#cb529-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is low for a male!&quot;</span>)</span>
<span id="cb529-14"><a href="ifelse.html#cb529-14" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span> <span class="sc">&amp;&amp;</span> hb <span class="sc">&lt;</span> <span class="dv">117</span>) {</span>
<span id="cb529-15"><a href="ifelse.html#cb529-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin is low for a female!&quot;</span>)</span>
<span id="cb529-16"><a href="ifelse.html#cb529-16" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb529-17"><a href="ifelse.html#cb529-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;Hemoglobin OK&quot;</span>)</span>
<span id="cb529-18"><a href="ifelse.html#cb529-18" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb529-19"><a href="ifelse.html#cb529-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb529-20"><a href="ifelse.html#cb529-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb529-21"><a href="ifelse.html#cb529-21" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="at">hb =</span> <span class="st">&quot;120&quot;</span>, <span class="at">sex =</span> <span class="st">&quot;female&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Hemoglobin should be numeric and positive&quot;</code></pre>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="ifelse.html#cb531-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hb_alert</span>(<span class="at">hb =</span> <span class="dv">120</span>, <span class="at">sex =</span> <span class="st">&quot;FEMALE&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;This function can only deal with binary sex: female or male&quot;</code></pre>
</div>
<div id="alkioiden-poimiminen-vektorista-tietyn-ehdon-perusteella" class="section level2" number="12.3">
<h2><span class="header-section-number">12.3</span> Alkioiden poimiminen vektorista tietyn ehdon perusteella</h2>
<!-- Santtu: poistin taas viittaukse viikkoihin jotta yleisyys säilyy -->
<p>Seuraava tilanne on melko tyypillinen: on käytävä läpi vektorin arvot, ja säilytettävä niistä ne, jotka täyttivät tietyn ehdon. Tätä ongelmaa voi lähestyä esimerkiksi seuraavalla tavalla:
<!--Tätä aihetta käsitellään enemmän ensi viikolla, mutta tässä lyhyt vinkki tällaisten tehtävien ratkaisuun:--></p>
<!-- Santtu: Tämä voi olla joskus nopea ja yksinkertainen ratkaisu, mutta käytännössä vectorize vain niputtaa annetun funktion sopivaan sapply kutsuun, mikä ei välttämättä ole hyvä ratkaisu, jos alkuperäisen funktion olisii itse voinut koodata vektorimuotoiseksi ilman silmukkarakenteita. Opetuksena siis se, että vectorize ei ole "aitoa" vektorisointia. -->
<ul>
<li>Luo apufunktio, joka ottaa syötteeksi yhden arvon, ja tarkistaa täyttyykö ehto. Tämän funktion tulee palauttaa <code>TRUE</code>, jos ehto täyttyy ja <code>FALSE</code>, jos ehto ei täyty.</li>
<li>Käytä funktiota <code>Vectorize</code>, jolla voit muuttaa funktiosi vektoroiduksi funktioksi. Vektorointi tarkoittaa tässä yhteydessä sitä, että yhden alkion sijaan vektoroitua funktiota voidaankin kutsua vektoriargumentilla, ja jokaiselle argumentin alkiolle suoritetaan alkuperäisen funktion määrittelemä operaatio.
<!--Kun vektoroidulle funktiolle annetaan vektori, jossa on monta alkiota, funktio ajetaan automaattisesti alkio kerrallaan, kuten monet R:n omat funktiot. --></li>
<li>Käytä vektoroitua apufunktiota vektorin indeksointiin.</li>
</ul>
<p>Tässä on esimerkki, jossa käydään läpi vektori DNA:n emäksiä, joista poimitaan vain sytosiinit ja guaniinit.</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="ifelse.html#cb533-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper function</span></span>
<span id="cb533-2"><a href="ifelse.html#cb533-2" aria-hidden="true" tabindex="-1"></a>is_cg <span class="ot">&lt;-</span> <span class="cf">function</span>(base) {</span>
<span id="cb533-3"><a href="ifelse.html#cb533-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (base <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;C&quot;</span>, <span class="st">&quot;G&quot;</span>)) {</span>
<span id="cb533-4"><a href="ifelse.html#cb533-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">TRUE</span>)</span>
<span id="cb533-5"><a href="ifelse.html#cb533-5" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb533-6"><a href="ifelse.html#cb533-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb533-7"><a href="ifelse.html#cb533-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb533-8"><a href="ifelse.html#cb533-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb533-9"><a href="ifelse.html#cb533-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb533-10"><a href="ifelse.html#cb533-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Vectorize</span></span>
<span id="cb533-11"><a href="ifelse.html#cb533-11" aria-hidden="true" tabindex="-1"></a>is_cg_vector <span class="ot">&lt;-</span> <span class="fu">Vectorize</span>(is_cg)</span>
<span id="cb533-12"><a href="ifelse.html#cb533-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb533-13"><a href="ifelse.html#cb533-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Main function</span></span>
<span id="cb533-14"><a href="ifelse.html#cb533-14" aria-hidden="true" tabindex="-1"></a>pick_cg <span class="ot">&lt;-</span> <span class="cf">function</span>(bases) {</span>
<span id="cb533-15"><a href="ifelse.html#cb533-15" aria-hidden="true" tabindex="-1"></a>  only_cg <span class="ot">&lt;-</span> bases[<span class="fu">is_cg_vector</span>(bases)]</span>
<span id="cb533-16"><a href="ifelse.html#cb533-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(only_cg)</span>
<span id="cb533-17"><a href="ifelse.html#cb533-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb533-18"><a href="ifelse.html#cb533-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb533-19"><a href="ifelse.html#cb533-19" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: this only checks the first value of the vector</span></span>
<span id="cb533-20"><a href="ifelse.html#cb533-20" aria-hidden="true" tabindex="-1"></a>my_bases <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;T&quot;</span>, <span class="st">&quot;G&quot;</span>, <span class="st">&quot;T&quot;</span>)</span>
<span id="cb533-21"><a href="ifelse.html#cb533-21" aria-hidden="true" tabindex="-1"></a><span class="fu">is_cg</span>(my_bases)</span></code></pre></div>
<pre><code>## Warning in if (base %in% c(&quot;C&quot;, &quot;G&quot;)) {: the condition has length &gt; 1 and only
## the first element will be used</code></pre>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="ifelse.html#cb536-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This works as expected</span></span>
<span id="cb536-2"><a href="ifelse.html#cb536-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is_cg_vector</span>(my_bases)</span></code></pre></div>
<pre><code>##     A     C     C     T     G     T 
## FALSE  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="ifelse.html#cb538-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pick only C and G</span></span>
<span id="cb538-2"><a href="ifelse.html#cb538-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pick_cg</span>(my_bases)</span></code></pre></div>
<pre><code>## [1] &quot;C&quot; &quot;C&quot; &quot;G&quot;</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="loops.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-ohjelmoinnin-perusteet.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
